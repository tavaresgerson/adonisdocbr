import{_ as a,c as i,a2 as e,o as n}from"./chunks/framework.BLTIpkzl.js";const k=JSON.parse('{"title":"Ativos estáticos","description":"","frontmatter":{},"headers":[],"relativePath":"docs/guides/http/static-assets.md","filePath":"docs/guides/http/static-assets.md"}'),t={name:"docs/guides/http/static-assets.md"};function l(o,s,r,p,d,h){return n(),i("div",null,s[0]||(s[0]=[e(`<h1 id="ativos-estaticos" tabindex="-1">Ativos estáticos <a class="header-anchor" href="#ativos-estaticos" aria-label="Permalink to &quot;Ativos estáticos&quot;">​</a></h1><p>O AdonisJS vem com um servidor de arquivos estático para servir os arquivos de um diretório específico. É tão simples quanto soltar um arquivo dentro do diretório <code>./public</code> e acessá-lo pelo nome do arquivo. Por exemplo:</p><p>Crie um arquivo chamado <code>public/style.css</code> com o seguinte conteúdo.</p><div class="language-css vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  background</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">#f7f7f7</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>E então acesse-o visitando o <a href="http://localhost:3333/style.css" target="_blank" rel="noreferrer">http://localhost:3333/style.css</a>. Você não precisa digitar o nome do diretório (/public), e os arquivos são acessíveis diretamente pelo nome do arquivo.</p><h2 id="configuracao" tabindex="-1">Configuração <a class="header-anchor" href="#configuracao" aria-label="Permalink to &quot;Configuração&quot;">​</a></h2><p>A configuração para o servidor estático é armazenada dentro do arquivo <code>config/static.ts</code>.</p><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { AssetsConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@ioc:Adonis/Core/Static&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> staticConfig</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AssetsConfig</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  enabled: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  dotFiles: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ignore&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  etag: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  lastModified: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> staticConfig</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="enabled" tabindex="-1"><code>enabled</code> <a class="header-anchor" href="#enabled" aria-label="Permalink to &quot;\`enabled\`&quot;">​</a></h4><p>Um botão de alternância para habilitar/desabilitar o servidor de arquivos estático.</p><h4 id="dotfiles" tabindex="-1"><code>dotFiles</code> <a class="header-anchor" href="#dotfiles" aria-label="Permalink to &quot;\`dotFiles\`&quot;">​</a></h4><p>O tratamento para os dotfiles. O valor pode ser um dos seguintes:</p><ul><li><code>&#39;allow&#39;</code>: Nenhum tratamento especial para dotfiles. Apenas os sirva como qualquer outro arquivo.</li><li><code>&#39;deny&#39;</code>: Negue a solicitação com um código de status 403.</li><li><code>&#39;ignore&#39;</code>: Finja que o dotfile não existe.</li></ul><h4 id="etag" tabindex="-1"><code>etag</code> <a class="header-anchor" href="#etag" aria-label="Permalink to &quot;\`etag\`&quot;">​</a></h4><p>Se deve ou não gerar o ETag para os arquivos.</p><h4 id="lastmodified" tabindex="-1"><code>lastModified</code> <a class="header-anchor" href="#lastmodified" aria-label="Permalink to &quot;\`lastModified\`&quot;">​</a></h4><p>Habilite ou desabilite o cabeçalho HTTP <code>Last-Modified</code>. O valor do cabeçalho depende do último valor modificado do arquivo.</p><h2 id="o-diretorio-padrao" tabindex="-1">O diretório padrão <a class="header-anchor" href="#o-diretorio-padrao" aria-label="Permalink to &quot;O diretório padrão&quot;">​</a></h2><p>Convencionalmente, servimos os arquivos do diretório <code>./public</code>. No entanto, você pode escolher um diretório diferente configurando-o dentro do arquivo <code>.adonisrc.json</code>.</p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// .adonisrc.json</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;directories&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;public&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;assets&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>Após a alteração acima, o servidor estático servirá os arquivos do diretório <code>./assets</code>.</p><h3 id="notificando-o-assembler-sobre-a-alteracao" tabindex="-1">Notificando o assembler sobre a alteração <a class="header-anchor" href="#notificando-o-assembler-sobre-a-alteracao" aria-label="Permalink to &quot;Notificando o assembler sobre a alteração&quot;">​</a></h3><p>O pacote <code>@adonisjs/assembler</code> compila seu aplicativo de produção e grava a saída no diretório <code>./build</code>.</p><p>Durante esse processo, ele também copia os arquivos do diretório <code>public</code> e, portanto, você deve notificá-lo sobre a alteração no arquivo <code>.adonisrc.json</code>.</p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark has-diff vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// .adonisrc.json</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;metaFiles&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line diff remove"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    { </span></span>
<span class="line diff remove"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;pattern&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;public/**&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span></span>
<span class="line diff remove"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;reloadServer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line diff remove"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }, </span></span>
<span class="line diff add"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    { </span></span>
<span class="line diff add"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;pattern&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;assets/**&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span></span>
<span class="line diff add"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;reloadServer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line diff add"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    } </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="conflitos-de-url" tabindex="-1">Conflitos de URL <a class="header-anchor" href="#conflitos-de-url" aria-label="Permalink to &quot;Conflitos de URL&quot;">​</a></h2><p>Caso seus nomes de arquivo estático entrem em conflito com uma rota registrada, o AdonisJS dará preferência ao arquivo estático e o manipulador de rota nunca será chamado.</p><p>Nesse cenário, recomendamos que você renomeie o arquivo estático ou mova-o para dentro de uma subpasta para evitar o conflito em primeiro lugar.</p><h2 id="leitura-adicional" tabindex="-1">Leitura adicional <a class="header-anchor" href="#leitura-adicional" aria-label="Permalink to &quot;Leitura adicional&quot;">​</a></h2><p><a href="./assets-manager.html">Gerente de ativos</a></p>`,30)]))}const u=a(t,[["render",l]]);export{k as __pageData,u as default};
