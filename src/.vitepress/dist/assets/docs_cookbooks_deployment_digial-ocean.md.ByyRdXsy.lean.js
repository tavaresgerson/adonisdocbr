import{_ as e,c as i,a2 as s,o}from"./chunks/framework.BLTIpkzl.js";const n="/assets/do-start-screen.CUrfGkmU.webp",r="/assets/do-remmaped-env-vars.DotF5LVn.webp",t="/assets/do-job-component.BPkE8qWC.webp",g=JSON.parse('{"title":"Aplicativos digitais do oceano","description":"","frontmatter":{},"headers":[],"relativePath":"docs/cookbooks/deployment/digial-ocean.md","filePath":"docs/cookbooks/deployment/digial-ocean.md"}'),d={name:"docs/cookbooks/deployment/digial-ocean.md"};function p(c,a,l,m,u,h){return o(),i("div",null,a[0]||(a[0]=[s(`<h1 id="aplicativos-digitais-do-oceano" tabindex="-1">Aplicativos digitais do oceano <a class="header-anchor" href="#aplicativos-digitais-do-oceano" aria-label="Permalink to &quot;Aplicativos digitais do oceano&quot;">​</a></h1><p>Este guia abrange as etapas de ação para implantar um aplicativo AdonisJS na <a href="https://docs.digitalocean.com/products/app-platform/" target="_blank" rel="noreferrer">plataforma de aplicativos digitais do oceano</a>.</p><p>Implantar um aplicativo AdonisJS não é diferente de implantar um aplicativo Node.js padrão. Você só precisa manter algumas coisas em mente:</p><ul><li>Você constrói sua fonte TypeScript para JavaScript, antes de implantar o aplicativo.</li><li>Você terá que iniciar o servidor a partir da pasta <code>build</code> e não da raiz do projeto. O mesmo vale para executar migrações em qualquer outro aplicativo Node.js.</li></ul><p>Você pode construir seu projeto para produção executando o seguinte comando ace. Saiba mais sobre o <a href="/docs/guides/fundamentals/typescript-build-process.html">processo de construção TypeScript</a></p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ace</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --production</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># OU use o script npm</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="configurando-o-aplicativo-do" tabindex="-1">Configurando o aplicativo DO <a class="header-anchor" href="#configurando-o-aplicativo-do" aria-label="Permalink to &quot;Configurando o aplicativo DO&quot;">​</a></h2><p>No momento da implantação do seu aplicativo na plataforma de aplicativos DO, você será solicitado a fornecer o ambiente. Você pode consultar o arquivo de desenvolvimento <code>.env</code> para as variáveis ​​que você deve definir.</p><ul><li>Defina a variável de ambiente <code>PORT</code> da mesma forma que a <strong>porta HTTP</strong> que você selecionou nas configurações.</li><li>Certifique-se de gerar a chave do aplicativo executando o comando <code>node ace generate:key</code> na sua máquina local e defina-a como variável de ambiente <code>APP_KEY</code>.</li><li>Salve a <code>APP_KEY</code> com segurança. Se você perder essa chave, todos os dados de criptografia, cookies e sessões se tornarão inválidos.</li><li>Certifique-se de alterar o <strong>comando run</strong> para iniciar o servidor a partir da pasta de compilação. <code>node build/server.js</code>.</li></ul><p><img src="`+n+`" alt="image"></p><h2 id="usando-banco-de-dados" tabindex="-1">Usando banco de dados <a class="header-anchor" href="#usando-banco-de-dados" aria-label="Permalink to &quot;Usando banco de dados&quot;">​</a></h2><p>Você também pode adicionar o banco de dados como um componente ao seu aplicativo e, em seguida, atualizar as variáveis ​​de ambiente com as credenciais do banco de dados.</p><p>Achamos as variáveis ​​de ambiente do banco de dados Digital Ocean muito genéricas e recomendamos remapeá-las da seguinte forma:</p><h4 id="variaveis-​​de-ambiente-injetadas-digital-ocean" tabindex="-1">Variáveis ​​de ambiente injetadas Digital Ocean <a class="header-anchor" href="#variaveis-​​de-ambiente-injetadas-digital-ocean" aria-label="Permalink to &quot;Variáveis ​​de ambiente injetadas Digital Ocean&quot;">​</a></h4><div class="language-dotenv vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">dotenv</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">HOSTNAME</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">PORT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">USERNAME</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">PASSWORD</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">DATABASE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="remapeando-as-para-serem-especificas" tabindex="-1">Remapeando-as para serem específicas <a class="header-anchor" href="#remapeando-as-para-serem-especificas" aria-label="Permalink to &quot;Remapeando-as para serem específicas&quot;">​</a></h4><p>Você deve remapear as variáveis ​​de ambiente para serem mais específicas. Por exemplo</p><p><img src="`+r+'" alt="image"></p><h3 id="executando-migracoes" tabindex="-1">Executando migrações <a class="header-anchor" href="#executando-migracoes" aria-label="Permalink to &quot;Executando migrações&quot;">​</a></h3><p>Depois de adicionar o banco de dados, você terá que adicionar um novo componente de <strong>&quot;Tipo de trabalho&quot;</strong> e certificar-se de selecionar <strong>&quot;Antes de cada implantação&quot;</strong> como seu ciclo de vida.</p><p>O Digital Ocean fará você repetir o mesmo processo de adicionar um novo componente, selecionar novamente o repositório e redefinir as variáveis ​​de ambiente. No entanto, desta vez estamos adicionando um trabalho e não um serviço da web.</p><p>Além disso, certifique-se de atualizar o <strong>Comando de execução</strong> para <code>node build/ace make:migration --force</code>.</p><p><img src="'+t+'" alt="image"></p><h2 id="gerenciando-arquivos-enviados-pelo-usuario" tabindex="-1">Gerenciando arquivos enviados pelo usuário <a class="header-anchor" href="#gerenciando-arquivos-enviados-pelo-usuario" aria-label="Permalink to &quot;Gerenciando arquivos enviados pelo usuário&quot;">​</a></h2><p>Os aplicativos Digital Ocean não têm armazenamento persistente e, portanto, você não pode salvar os arquivos enviados pelo usuário no sistema de arquivos do servidor. Isso deixa você com apenas uma opção de salvar os arquivos enviados em um serviço externo como o Digital Ocean Spaces.</p><p>Atualmente, estamos trabalhando em um módulo que permite que você use o sistema de arquivos local durante o desenvolvimento e, em seguida, alterne para um sistema de arquivos externo como o Digital Ocean Spaces para produção. Faça tudo isso sem alterar uma única linha de código.</p>',26)]))}const b=e(d,[["render",p]]);export{g as __pageData,b as default};
